paths:
    games:
      post:
        tags:
          - Schedule
        requestBody:
          description: The request body should contain a user id, game id, team id, duration, period, assist1 id, assist2 id, powerplay, and penalty
          required: true
          content:
            multipart/form-data:
              schema:
                $ref: "#/schemas/ScheduleRequest"
        summary: Generate schedule and get analysis corresponding to seasonId
        description: |
          **REQUIRED PERMISSIONS:** admin
        responses:
          200:
            description: Successfully generated schedule
            content:
              application/json:
                schema:
                  $ref: '#/schemas/ScheduleResponse'
          400:
            $ref: "../common/errors.yml#/responses/BadRequest"

schemas:
  ScheduleResponse:
    type: object
    properties:
      status_code:
        $ref: "../common/schemas.yml#/schemas/StatusCode200"
      status_string:
        $ref: "../common/schemas.yml#/schemas/StatusString200"
      request_id:
        $ref: "../common/schemas.yml#/schemas/RequestId"
      response_data:
        type: array
        items:
          $ref: '#/components/schemas/TeamStats'
  ScheduleRequest:
    type: object
    properties:
      seasonId:
        type: int
        description: The id of the season to generate a schedule for
      algorithm:
        type: string
        description: The type of algorithm to use
        example: round_robin
      ice_times:
        type: string
        format: binary

components:
  schemas:
    TeamStats:
      type: object
      properties:
        name:
          type: string
        league:
          type: string
        earlyGames:
          type: int
        lateGames:
          type: int
        daysOfTheWeek:
          type: object
          additionalProperties:
            type: object
            properties:
              day:
                type: string
              count:
                type: string
        daysBetweenGames:
          type: array
          items:
            type: integer
        averageDaysBetweenGames:
          type: float
        games:
          type: array
          items:
            $ref: '#components/schemas/Game'
        balanced:
          type: boolean
    Game:
      type: object
      properties:
        season_id:
          type: integer
        start:
          type: string
        venue:
          $ref: '#components/schemas/Venue'
        venueId:
          type: integer
        status:
          type: string
        home_team:
          $ref: '#components/schemas/Team'
        home_team_id:
          type: integer
        home_team_roster:
          $ref: '#components/schemas/Roster'
        home_team_roster_id:
          type: integer
        home_team_locker_room:
          type: integer
        home_team_shots_on_goal:
          type: integer
        home_team_score:
          type: integer
        away_team:
          $ref: '#components/schemas/Team'
        away_team_id:
          type: integer
        away_team_roster:
          $ref: '#components/schemas/Roster'
        away_team_roster_id:
          type: integer
        away_team_locker_room:
          type: integer
        away_team_shots_on_goal:
          type: integer
        away_team_score:
          type: integer
        optimized:
          type: boolean
    Venue:
      type: object
      properties:
        name:
          type: string
        address:
          type: string
        locker_rooms:
          type: array
          items:
            type: string
    Team:
      type: object
      properties:
        correlation_id:
          type: integer
        name:
          type: string
        logo_id:
          type: string
        color:
          type: string
        league_id:
          type: integer
        league:
          $ref: '#components/schemas/League'
        roster:
          $ref: '#components/schemas/Roster'
        roster_id:
          type: integer
        wins:
          type: integer
        losses:
          type: integer
    Roster:
      type: onject
      properties:
        players:
          type: array
          items:
            $ref: '../users/users.yml#schemas/User'
        captain:
            $ref: '../users/users.yml#schemas/User'
        captain_id:
          type: integer
    League:
      type: onject
      properties:
        correlation_id:
          type: integer
        season_id:
          type: integer
        name:
          type: string
        teams:
          type: array
          items:
            $ref: '#components/schemas/Team'
